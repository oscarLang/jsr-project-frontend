(this["webpackJsonpjsr-project-fe"]=this["webpackJsonpjsr-project-fe"]||[]).push([[0],{310:function(e,t,n){},312:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(58),s=n.n(c),i=n(41),o=(n(310),n(19)),u=n.n(o),l=n(28),j=n(12),b=n(560),d=n(522),x=n(561),O=n(562),p=n(563),h=n(546),f=n(537),m=n(530),g=n(557),v=n(544),k=n(529),y=n(564),w=n(556),S=n(201),F=n.n(S),C=n(27),E=(n(312),n(523)),L=n(534),T=n(540),I=n(31),N=n(536),U=n(532),P=n(538),H=n(512),_=n(513),G=n(271),A=n(69),D=n(270),R=n(285),W=n(142),B=n(525),$=n(1),M=function(e){var t=e.object,n=a.a.useState([]),r=Object(j.a)(n,2),c=r[0],s=r[1],i=a.a.useState("HOUR"),o=Object(j.a)(i,2),u=o[0],l=o[1],b=a.a.useState("HH:mm"),d=Object(j.a)(b,2),x=d[0],O=d[1];a.a.useEffect((function(){t&&Object.keys(t).length&&p(u)}),[t]);var p=function(e){switch(e){case"HOUR":s(t.minutly),l("HOUR"),O("HH:mm");break;case"DAY":s(t.hourly),O("HH:mm"),l("DAY");break;case"MONTH":s(t.daily),O("MM/dd"),l("MONTH")}};if(!t||!Object.keys(t).length||!c.length)return Object($.jsx)(N.a,{});var h=c.reduce((function(e,t){return parseFloat(e.price)<parseFloat(t.price)?e:t})),m=c.reduce((function(e,t){return parseFloat(e.price)>parseFloat(t.price)?e:t})),g=Number(h.price)-20>=0?Number(h.price)-20:0,v=Number(m.price)+20;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(f.a,{variant:"h6",children:t.name}),Object($.jsx)(H.a,{width:"99%",aspect:3,children:Object($.jsxs)(_.a,{data:Object(I.a)(c).reverse(),margin:{top:24,right:24,bottom:0,left:24},children:[Object($.jsx)(G.a,{domain:[Math.round(g),Math.round(v)],children:Object($.jsx)(A.a,{angle:270,position:"left",children:"Price"})}),Object($.jsx)(D.a,{dataKey:"date",tickFormatter:function(e){return Object(B.a)(Date.parse(e),x)}}),Object($.jsx)(R.a,{dataKey:"price",stroke:"purple",fill:"lightblue",type:"monotone",dot:!1}),Object($.jsx)(W.a,{formatter:function(e){return["$".concat(Number(e).toFixed(2)),"Price"]},labelFormatter:function(e){return Object(B.a)(Date.parse(e),"yyyy/MM/dd-HH:mm")}})]})}),Object($.jsxs)(U.a,{color:"primary",value:u,exclusive:!0,onChange:function(e,t){return p(t)},fullWidth:!0,size:"small",children:[Object($.jsx)(P.a,{value:"HOUR",children:"Latest hour"}),Object($.jsx)(P.a,{value:"DAY",children:"Last 24 hours"}),Object($.jsx)(P.a,{value:"MONTH",children:"Last month"})]})]})},q=n(272),z=n.n(q),Y=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z()({method:n,url:"http://localhost:1338"+t,withCredentials:!0,data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=Y,K=n(549),V=n(550),Q=n(551),X=n(547),Z=n(548),ee=n(552),te=n(20),ne=n(117),re=n(165),ae=n(539),ce=n(541),se=n(542),ie=n(543),oe=n(524),ue=n(545),le=function(e,t){switch(t.type){case"LOGIN_BEGIN":return Object(te.a)(Object(te.a)({},e),{},{isLoggedIn:!1,isLoggingIn:!0});case"LOGIN_SUCCESS":return Object(te.a)(Object(te.a)({},e),{},{isLoggedIn:!0,isLoggingIn:!1,profile:t.data,funds:t.data.funds||0});case"LOGIN_FAIL":return Object(te.a)(Object(te.a)({},e),{},{isLoggedIn:!1,isLoggingIn:!1,profile:void 0});case"FETCH_USER_BEGIN":return Object(te.a)(Object(te.a)({},e),{},{isFetchingUser:!0});case"FETCH_USER_SUCCESS":return Object(te.a)(Object(te.a)({},e),{},{isFetchingUser:!1,isLoggedIn:!0,profile:t.data,funds:t.data.funds||0});case"FETCH_USER_FAIL":return Object(te.a)(Object(te.a)({},e),{},{isFetchingUser:!1,isLoggedIn:!1});case"FETCH_FUNDS":return Object(te.a)(Object(te.a)({},e),{},{isFetchingFunds:!0});case"FETCH_FUNDS_ERROR":return Object(te.a)(Object(te.a)({},e),{},{isFetchingFunds:!1});case"SET_FUNDS":return Object(te.a)(Object(te.a)({},e),{},{isFetchingFunds:!1,funds:t.data.funds||0});case"LOGOUT":return Object(te.a)(Object(te.a)({},e),{},{isLoggingIn:!1,isLoggedIn:!1,profile:{},isFetchingFunds:!1,funds:0,isFetchingUser:!1});default:return e}},je={isLoggingIn:!1,isLoggedIn:!1,profile:{},isFetchingFunds:!1,funds:0,isFetchingUser:!1,loginUser:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getProfile:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFunds:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:Function},be=a.a.createContext(je),de=function(e){var t=e.children,n=Object(r.useReducer)(le,je),a=Object(j.a)(n,2),c=a[0],s=a[1],i=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s({type:"LOGIN_BEGIN"}),e.next=4,J("/user/login/","POST",{email:t,password:n});case 4:return r=e.sent,s({type:"LOGIN_SUCCESS",data:r.data}),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),s({type:"LOGIN_FAIL"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s({type:"FETCH_USER_BEGIN"}),e.next=4,J("/user/profile/","GET");case 4:return t=e.sent,s({type:"FETCH_USER_SUCCESS",data:t.data}),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),s({type:"FETCH_USER_FAIL"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s({type:"FETCH_FUNDS"}),e.next=4,J("/user/funds/","GET");case 4:return t=e.sent,s({type:"SET_FUNDS",data:t.data}),e.abrupt("return",t.data);case 9:return e.prev=9,e.t0=e.catch(0),s({type:"FETCH_FUNDS_ERROR"}),e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object($.jsx)(be.Provider,{value:Object(te.a)(Object(te.a)({},c),{},{getProfile:o,loginUser:i,getFunds:b,logout:function(){document.cookie="jwt=; Max-Age=-99999999;",s({type:"LOGOUT"})}}),children:t})},xe=n(64),Oe=["stock"],pe=function(e){var t=e.stock,n=Object(re.a)(e,Oe),c=Object(r.useContext)(be),s=c.profile,i=c.getProfile,o=c.funds,b=Object(xe.b)().enqueueSnackbar,d=a.a.useState(""),x=Object(j.a)(d,2),O=x[0],p=x[1],m=a.a.useState(!1),g=Object(j.a)(m,2),v=g[0],k=g[1],y=a.a.useState(0),w=Object(j.a)(y,2),S=w[0],F=w[1],C=a.a.useState(0),E=Object(j.a)(C,2),T=E[0],I=E[1];a.a.useEffect((function(){var e;if(s&&(null===(e=s.stocks)||void 0===e?void 0:e.length)){var n=s.stocks.find((function(e){return e.name===t.name}));n&&I(n.amount)}}),[s]);var N=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return p("Fix errors before buying stock: "+O),e.abrupt("return");case 3:return e.next=5,J("/market/buy/","POST",{stock:t.ticker,amount:S});case 5:if(!e.sent){e.next=13;break}return b(S+" stocks of "+t.name+" bought"),k(!1),e.next=11,i();case 11:e.next=15;break;case 13:k(!0),p("Failed to purchase stocks");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)(ae.a,Object(te.a)(Object(te.a)({},n),{},{children:[Object($.jsx)(ce.a,{id:"form-dialog-title",children:"Buy stocks"}),Object($.jsxs)(se.a,{children:[Object($.jsxs)(ie.a,{children:["Buy stocks of ",t.name," for current price of $",t.price]}),T>0&&Object($.jsxs)(ie.a,{children:["You currently have ",T," stocks of this type."]}),Object($.jsxs)(L.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object($.jsx)(L.a,{item:!0,children:Object($.jsx)(oe.a,{autoFocus:!0,id:"amount",label:"Amount",type:"number",error:v,onChange:function(e){var n=e.target.value;n*parseFloat(t.price)>o?(k(!0),p("Not enough funds available!")):n<0?(k(!0),p("Amount can not be negative")):(k(!1),p("")),F(n)},value:S,helperText:O})}),Object($.jsx)(L.a,{item:!0,children:Object($.jsxs)(f.a,{variant:"subtitle1",children:["for $",(S*Number(t.price)).toFixed(2)]})})]})]}),Object($.jsx)(ue.a,{children:Object($.jsx)(h.a,{color:"primary",onClick:N,disabled:v,children:"Buy"})})]}))},he=["stock"],fe=function(e){var t=e.stock,n=Object(re.a)(e,he),c=Object(r.useContext)(be),s=c.profile,i=c.getProfile,o=Object(xe.b)().enqueueSnackbar,b=a.a.useState(""),d=Object(j.a)(b,2),x=d[0],O=d[1],p=a.a.useState(!1),f=Object(j.a)(p,2),m=f[0],g=f[1],v=a.a.useState(0),k=Object(j.a)(v,2),y=k[0],w=k[1],S=a.a.useState(0),F=Object(j.a)(S,2),C=F[0],E=F[1];a.a.useEffect((function(){var e;if(s&&(null===(e=s.stocks)||void 0===e?void 0:e.length)){var n=s.stocks.find((function(e){return e.name===t.ticker}));n&&E(n.amount)}}),[s]);var L=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=3;break}return O("Fix errors before buying stock: "+x),e.abrupt("return");case 3:return e.next=5,J("/market/sell/","POST",{stock:t.ticker,amount:y});case 5:if(!e.sent){e.next=13;break}return o(y+" stocks of "+t.name+" sold"),g(!1),e.next=11,i();case 11:e.next=15;break;case 13:g(!0),O("Failed to sell stocks");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)(ae.a,Object(te.a)(Object(te.a)({},n),{},{children:[Object($.jsx)(ce.a,{id:"form-dialog-title",children:"Sell stocks"}),Object($.jsxs)(se.a,{children:[Object($.jsxs)(ie.a,{children:["Sell stocks of ",t.name," for current price of $",t.price]}),Object($.jsxs)(ie.a,{children:["You currently have ",C," stocks of this type."]}),Object($.jsx)(oe.a,{autoFocus:!0,margin:"dense",id:"amount",label:"Amount",type:"number",fullWidth:!0,error:m,onChange:function(e){var t=e.target.value;t<0?(g(!0),O("Amount can not be negative")):t>C?(g(!0),O("You only have "+C+" of this stock")):(g(!1),O("")),w(t)},value:y,helperText:x})]}),Object($.jsx)(ue.a,{children:Object($.jsx)(h.a,{color:"primary",onClick:L,disabled:m,children:"Sell"})})]}))},me=function(e){var t=Number(e.price);if(!e.daily)return 0;var n=Number(e.hourly.slice(-1)[0].price);return console.log(n),(t-n)/n*100},ge=n(274),ve=n.n(ge),ke=function(e){var t=e.row,n=e.alternativeLayout,r=a.a.useState("black"),c=Object(j.a)(r,2),s=c[0],i=c[1],o=a.a.useState(t),u=Object(j.a)(o,2),l=u[0],b=u[1],d=Object(C.g)(),x=Object(ne.b)().showModal;a.a.useEffect((function(){return Ke.on("marketChange".concat(t.ticker),(function(e){b(Object(te.a)(Object(te.a)({},l),{},{price:e.price})),i(e.changePositive?"green":"red"),setTimeout((function(){i("black")}),5e3)})),function(){Ke.removeAllListeners("marketChange".concat(t.ticker))}}),[]);var O=0;O=n?(Number(t.price)-Number(t.buyPrice))/Number(t.buyPrice)*100:Number(me(t).toFixed(0));var p=function(){d.push("/stocks/".concat(l.ticker))};return Object($.jsxs)(X.a,{children:[Object($.jsx)(Z.a,{component:"th",scope:"row",onClick:function(){return p()},children:Object($.jsx)(ve.a,{color:"primary"})}),Object($.jsx)(Z.a,{component:"th",scope:"row",onClick:function(){return p()},children:l.ticker}),n?Object($.jsxs)(Z.a,{component:"th",scope:"row",onClick:function(){return p()},children:["$",parseFloat(l.buyPrice).toFixed(2)]}):Object($.jsx)(Z.a,{component:"th",scope:"row",onClick:function(){return p()},children:l.name}),Object($.jsxs)(Z.a,{style:{color:s},align:"right",children:["$",parseFloat(l.price).toFixed(2)]}),n?Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(Z.a,{align:"right",style:{color:"".concat(O<0?"red":"green")},children:[O.toFixed(0),"%"]}),Object($.jsxs)(Z.a,{align:"right",children:[l.amount,"pcs"]})]}):Object($.jsxs)(Z.a,{align:"right",style:{color:"".concat(O<0?"red":"green")},children:[O,"%"]}),Object($.jsxs)(Z.a,{align:"right",children:[Object($.jsx)(h.a,{color:"error",onClick:function(){return x(fe,{stock:l})},children:"Sell"}),Object($.jsx)(h.a,{color:"success",onClick:function(){return x(pe,{stock:l})},children:"Buy"})]})]})},ye=function(e){var t=e.objects,n=e.alternativeLayout,r=void 0!==n&&n;return Object($.jsx)(K.a,{children:Object($.jsxs)(V.a,{"aria-label":"collapsible table",children:[Object($.jsx)(Q.a,{children:Object($.jsxs)(X.a,{children:[Object($.jsx)(Z.a,{}),Object($.jsx)(Z.a,{children:"Stock"}),Object($.jsx)(Z.a,{children:r?"Purchase price":"Name"}),Object($.jsx)(Z.a,{align:"right",children:"Current price($)"}),r?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Z.a,{align:"right",children:"Change"}),Object($.jsx)(Z.a,{align:"right",children:"Amount"})]}):Object($.jsx)(Z.a,{align:"right",children:"Change(24h)"}),Object($.jsx)(Z.a,{align:"center",children:"Actions"})]})}),Object($.jsx)(ee.a,{children:t&&t.map((function(e){return Object($.jsx)(ke,{row:e,alternativeLayout:r})}))})]})})},we=function(){var e=Object(r.useContext)(be),t=(e.isLoggedIn,e.profile,e.funds,a.a.useState([])),n=Object(j.a)(t,2),c=n[0],s=n[1];a.a.useEffect((function(){Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("/market/all/","GET");case 3:t=e.sent,s(t.data.res),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);var i=Math.floor(Math.random()*c.length+0);return Object($.jsxs)(L.a,{container:!0,spacing:2,children:[Object($.jsx)(L.a,{item:!0,xs:12,children:Object($.jsx)(T.a,{sx:{padding:"1em"},children:Object($.jsx)(M,{object:c?c[i]:{}})})}),Object($.jsx)(L.a,{item:!0,xs:12,children:Object($.jsxs)(T.a,{sx:{padding:"1em"},children:[Object($.jsx)(f.a,{variant:"h6",children:"Popular stocks"}),Object($.jsx)(ye,{objects:c,alternativeLayout:!1})]})})]})},Se=n(8),Fe=n(535),Ce=function(){var e=Object(r.useContext)(be).isLoggedIn,t=Object(xe.b)().enqueueSnackbar,n=Object(C.g)(),c=a.a.useState({email:"",password:"",passwordAgain:""}),s=Object(j.a)(c,2),i=s[0],o=s[1],b=function(e,t){o(Object(te.a)(Object(te.a)({},i),{},Object(Se.a)({},e,t)))},d=function(){var e=Object(l.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,J("/user/register/","POST",i);case 4:e.sent.data.res&&(t("Succesfully registred user",{variant:"success"}),n.push("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t("Succesfully registred user",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return e?Object($.jsx)(C.a,{to:"/"}):Object($.jsxs)(T.a,{sx:{maxWidth:500,margin:"auto",padding:"1em"},children:[Object($.jsx)(Fe.a,{}),Object($.jsx)(f.a,{component:"h1",variant:"h5",children:"Register to start trading"}),Object($.jsxs)("form",{onSubmit:d,children:[Object($.jsx)(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i.email,onChange:function(e){return b(e.target.name,e.target.value)}}),Object($.jsx)(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:i.password,onChange:function(e){return b(e.target.name,e.target.value)}}),Object($.jsx)(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"passwordAgain",label:"Password agian",type:"password",id:"password",value:i.passwordAgain,onChange:function(e){return b(e.target.name,e.target.value)}}),Object($.jsx)(h.a,{id:"register",type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Register"})]})]})},Ee=n(553),Le=n(554),Te=n(555),Ie=function(){var e=Object(r.useContext)(be),t=(e.isLoggedIn,e.profile,e.funds,a.a.useState()),n=Object(j.a)(t,2),c=n[0],s=n[1],i=a.a.useState(""),o=Object(j.a)(i,2),b=o[0],d=o[1],x=a.a.useState("black"),O=Object(j.a)(x,2),p=O[0],m=O[1],g=Object(ne.b)().showModal,v=Object(C.h)().ticker;a.a.useEffect((function(){return Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/market/".concat(v,"/"),"GET");case 2:t=e.sent,s(t.data),d(t.data.price);case 5:case"end":return e.stop()}}),e)})))(),Ke.on("minutly",(function(e){var t=e.find((function(e){return e.ticker===v}));t&&(console.log(t),s(t))})),Ke.on("marketChange".concat(v),(function(e){console.log("ja"),d(e.price),m(e.changePositive?"green":"red"),setTimeout((function(){m("black")}),5e3)})),function(){console.log("nej"),Ke.removeAllListeners("marketChange".concat(v))}}),[]);var k=me(c||{});return Object($.jsxs)(L.a,{container:!0,spacing:2,children:[Object($.jsx)(L.a,{item:!0,xs:12,children:Object($.jsx)(T.a,{sx:{padding:"1em"},children:Object($.jsx)(M,{object:c||{}})})}),Object($.jsx)(L.a,{item:!0,xs:12,sm:6,children:Object($.jsx)(Ee.a,{children:Object($.jsxs)(Le.a,{children:[Object($.jsxs)(f.a,{gutterBottom:!0,variant:"h5",component:"div",color:"primary",children:[null===c||void 0===c?void 0:c.ticker," - ",null===c||void 0===c?void 0:c.name]}),Object($.jsxs)(f.a,{variant:"subtitle1",children:["Slogan: ",Object($.jsx)("i",{children:null===c||void 0===c?void 0:c.catchPhrase})]}),Object($.jsxs)(f.a,{variant:"subtitle1",children:["CEO: ",null===c||void 0===c?void 0:c.ceo]}),Object($.jsxs)(f.a,{variant:"subtitle1",children:["Volatility: ",(100*((null===c||void 0===c?void 0:c.volatility)||0)).toFixed(2),"%"]})]})})}),Object($.jsx)(L.a,{item:!0,xs:12,sm:6,children:Object($.jsxs)(Ee.a,{children:[Object($.jsx)(Le.a,{children:Object($.jsxs)(L.a,{container:!0,children:[Object($.jsxs)(L.a,{item:!0,xs:6,children:[Object($.jsx)(f.a,{gutterBottom:!0,variant:"overline",component:"p",children:"Change(24h)"}),Object($.jsxs)(f.a,{style:{color:"".concat(k<0?"red":"green")},gutterBottom:!0,variant:"h5",component:"div",children:[k.toFixed(2),"% (24h)"]})]}),Object($.jsxs)(L.a,{item:!0,xs:6,children:[Object($.jsx)(f.a,{gutterBottom:!0,variant:"overline",component:"p",children:"Latest price"}),Object($.jsxs)(f.a,{style:{color:p},gutterBottom:!0,variant:"h5",component:"div",children:["$",parseFloat(b).toFixed(2)]})]})]})}),Object($.jsxs)(Te.a,{children:[Object($.jsx)(h.a,{variant:"contained",fullWidth:!0,size:"large",color:"success",onClick:function(){return g(pe,{stock:c||{}})},children:"Buy"}),Object($.jsx)(h.a,{variant:"contained",fullWidth:!0,size:"large",color:"error",onClick:function(){return g(fe,{stock:c||{}})},children:"Sell"})]})]})})]})},Ne=function(){var e=Object(r.useContext)(be),t=(e.isLoggingIn,e.isLoggedIn),n=e.profile,c=e.loginUser;a.a.useEffect((function(){console.log(n)}),[t]);var s=a.a.useState({email:"",password:""}),o=Object(j.a)(s,2),b=o[0],d=o[1],x=function(e,t){d(Object(te.a)(Object(te.a)({},b),{},Object(Se.a)({},e,t)))},O=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c(b.email,b.password);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object($.jsx)(C.a,{to:"/"}):Object($.jsxs)("div",{children:[Object($.jsx)(Fe.a,{}),Object($.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign in to start trading"}),Object($.jsxs)("form",{onSubmit:O,children:[Object($.jsx)(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:b.email,onChange:function(e){return x(e.target.name,e.target.value)}}),Object($.jsx)(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:b.password,onChange:function(e){return x(e.target.name,e.target.value)}}),Object($.jsx)(h.a,{id:"signin",type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign In"}),Object($.jsx)(L.a,{container:!0,children:Object($.jsx)(L.a,{item:!0,children:Object($.jsx)(i.b,{to:"/user/register",children:"Don't have an account? Sign Up"})})})]})]})},Ue=function(){var e=a.a.useState([]),t=Object(j.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("/market/all/","GET");case 3:t=e.sent,r(t.data.res),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),n.length?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(f.a,{variant:"h6",children:"Upcoming earnings"}),Object($.jsxs)(v.a,{children:[Object($.jsx)(k.a,{children:Object($.jsx)(w.a,{primary:n[0].ticker+" "+n[0].name,secondary:"2021-11-17"})}),Object($.jsx)(g.a,{}),Object($.jsx)(k.a,{children:Object($.jsx)(w.a,{primary:n.slice(-1)[0].ticker+" "+n.slice(-1)[0].name,secondary:"2021-12-24"})})]})]}):Object($.jsx)($.Fragment,{})},Pe=function(e){var t=e.user,n=e.funds,r=void 0===n?0:n,c=a.a.useState(0),s=Object(j.a)(c,2),o=s[0],b=s[1],d=a.a.useState(0),x=Object(j.a)(d,2),O=x[0],p=x[1];return a.a.useEffect((function(){Object(l.a)(u.a.mark((function e(){var t,n,r,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("/user/stocks/","GET");case 3:return t=e.sent,e.next=6,J("/market/all/","GET");case 6:n=e.sent,r=n.data.res,a=t.data.stocks.map((function(e){var t=r.find((function(t){return e.name===t.ticker}));return Object(te.a)(Object(te.a)({},t),e)})),c=0,s=0,a.forEach((function(e){c+=parseFloat(e.buyPrice)*e.amount,s+=parseFloat(e.price)*e.amount})),p((s-c)/c*100),b(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()}),[r]),t?Object($.jsxs)(v.a,{children:[Object($.jsx)(k.a,{children:Object($.jsx)(w.a,{primary:"Total value of portfolio",secondary:"$".concat(o.toFixed(2))})}),Object($.jsx)(g.a,{}),Object($.jsx)(k.a,{children:Object($.jsx)(w.a,{primary:"Development of your portfolio",secondary:"".concat(isNaN(O)?0:O.toFixed(2),"%")})}),Object($.jsx)(g.a,{}),Object($.jsx)(k.a,{children:Object($.jsx)(w.a,{primary:"Current funds",secondary:"".concat(r.toFixed(2),"$")})}),Object($.jsx)(g.a,{}),Object($.jsxs)(k.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object($.jsx)(h.a,{component:i.b,to:"/deposit",sx:{margin:"1px"},variant:"contained",size:"small",children:"Deposit funds"}),Object($.jsx)(h.a,{component:i.b,to:"/user/portfolio",sx:{margin:"1px"},variant:"contained",size:"small",color:"secondary",children:"View your portfolio"})]})]}):Object($.jsx)(N.a,{})},He=function(e){var t=Object(r.useContext)(be),n=t.isLoggedIn,a=t.profile,c=t.funds;return Object($.jsxs)(L.a,{container:!0,gap:1,children:[Object($.jsx)(L.a,{item:!0,xs:12,sm:7,children:Object($.jsx)(C.b,Object(te.a)({},e))}),Object($.jsxs)(L.a,{container:!0,item:!0,xs:12,sm:4,gap:1,children:[Object($.jsx)(L.a,{item:!0,sx:{flexGrow:1,display:{xs:"".concat(n?"inline":"none"),sm:"inline"}},children:Object($.jsx)(T.a,{sx:{padding:"1em"},children:n?Object($.jsx)(Pe,{user:a,funds:c}):Object($.jsx)(Ne,{})})}),Object($.jsx)(L.a,{item:!0,sx:{flexGrow:1},children:Object($.jsx)(T.a,{sx:{padding:"1em"},children:Object($.jsx)(Ue,{})})})]})]})},_e=n(558),Ge=n(559),Ae=function(){var e=Object(r.useContext)(be).getFunds,t=Object(xe.b)().enqueueSnackbar,n=Object(C.g)(),c=a.a.useState(0),s=Object(j.a)(c,2),i=s[0],o=s[1],b=function(){var r=Object(l.a)(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J("/user/deposit/","POST",{amount:i});case 3:return r.sent,t("Funds deposited",{variant:"success"}),r.next=7,e();case 7:n.push("/"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),t("Errow while trying to deposit funds",{variant:"error"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}}();return Object($.jsx)(T.a,{id:"deposit",children:Object($.jsxs)(L.a,{container:!0,sx:{padding:"1em 4em",margin:"auto",minHeight:"350px"},alignItems:"stretch",children:[Object($.jsxs)(L.a,{item:!0,xs:12,children:[Object($.jsx)(f.a,{variant:"h4",children:"Deposit to your account"}),Object($.jsx)(f.a,{variant:"body1",children:"The money goes straight into your account! "})]}),Object($.jsxs)(L.a,{item:!0,xs:12,children:[Object($.jsx)(oe.a,{fullWidth:!0,required:!0,type:"number",id:"amount",label:"Amount to deposit",name:"amount",value:i,sx:{marginBottom:"5px"},InputProps:{startAdornment:Object($.jsx)(_e.a,{position:"start",children:"$"})},onChange:function(e){return o(Number(e.target.value))}}),Object($.jsxs)(Ge.a,{variant:"contained",size:"small",color:"secondary",fullWidth:!0,children:[Object($.jsx)(h.a,{onClick:function(){return o(100)},children:"$100"}),Object($.jsx)(h.a,{onClick:function(){return o(250)},children:"$250"}),Object($.jsx)(h.a,{onClick:function(){return o(500)},children:"$500"}),Object($.jsx)(h.a,{onClick:function(){return o(1e3)},children:"$1000"})]})]}),Object($.jsx)(L.a,{item:!0,xs:12,children:Object($.jsx)(h.a,{onClick:function(){return b()},fullWidth:!0,variant:"contained",color:"primary",children:"Deposit funds"})})]})})},De=function(){var e=a.a.useState([]),t=Object(j.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){Object(l.a)(u.a.mark((function e(){var t,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("/user/stocks/","GET");case 3:return t=e.sent,e.next=6,J("/market/all/","GET");case 6:n=e.sent,a=n.data.res,c=t.data.stocks.filter((function(e){return e.amount>0})).map((function(e){var t=a.find((function(t){return e.name===t.ticker}));return Object(te.a)(Object(te.a)({},t),e)})),console.log(c),r(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),Object($.jsxs)(T.a,{sx:{padding:"1em"},children:[Object($.jsx)(f.a,{variant:"h6",children:"Porfolio"}),Object($.jsx)(ye,{objects:n,alternativeLayout:!0})]})},Re=n(282),We=function(){return a.a.useContext(be).isLoggedIn?Object($.jsx)(C.a,{to:"/"}):Object($.jsx)(T.a,{sx:{maxWidth:500,margin:"auto",padding:"1em"},children:Object($.jsx)(Ne,{})})},Be=n(280),$e=n.n(Be),Me=n(281),qe=n.n(Me),ze=n(202),Ye=n.n(ze),Je=function(){var e=a.a.useContext(be).logout;return a.a.useEffect((function(){e()}),[]),Object($.jsx)(C.a,{to:"/"})},Ke=Object(Re.a)("http://localhost:8200",{reconnectionDelayMax:1e4}),Ve=function(){var e=Object(r.useContext)(be),t=e.isLoggedIn,n=e.funds,c=e.getProfile,s=Object(xe.b)().enqueueSnackbar,o=a.a.useState(!1),S=Object(j.a)(o,2),L=S[0],T=S[1];return a.a.useEffect((function(){t||Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))(),Ke.on("connect_error",(function(e){s("Errow while trying to update stock market prices",{variant:"error"})}))}),[]),Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(b.a,{sx:{flexGrow:1},children:[Object($.jsx)(d.a,{}),Object($.jsx)(x.a,{position:"static",children:Object($.jsxs)(O.a,{children:[Object($.jsxs)(b.a,{sx:{flexGrow:1},children:[t&&Object($.jsx)(p.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return T(!0)},edge:"start",sx:{display:{xs:"flex",sm:"none"}},children:Object($.jsx)($e.a,{})}),Object($.jsxs)(h.a,{component:i.b,to:"/",sx:{display:{xs:"none",sm:"flex"}},color:"inherit",children:["StockSocket -",Object($.jsx)(f.a,{variant:"caption",children:"Trade 24/7"})]})]}),t?Object($.jsxs)("div",{children:[Object($.jsxs)(p.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:i.b,to:"/deposit",children:[Object($.jsx)(f.a,{variant:"h6",children:"$"+n.toFixed(2)}),Object($.jsx)(F.a,{})]}),Object($.jsx)(p.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:i.b,to:"/user/portfolio",children:Object($.jsx)(E.a,{})}),Object($.jsx)(p.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:i.b,to:"/user/logout",children:Object($.jsx)(Ye.a,{})})]}):Object($.jsx)(h.a,{component:i.b,to:"/user/login",sx:{display:{xs:"flex",sm:"none"}},color:"inherit",children:"Login"})]})})]}),Object($.jsx)(m.a,{open:L,onClose:function(){return T(!1)},onOpen:function(){return T(!0)},children:Object($.jsxs)(b.a,{sx:{width:250},role:"presentation",onClick:function(){return T(!1)},children:[Object($.jsxs)(O.a,{children:[Object($.jsx)(f.a,{variant:"button",children:"StockSocket -"}),Object($.jsx)(f.a,{variant:"caption",children:"Trade 24/7"})]}),Object($.jsx)(g.a,{}),Object($.jsxs)(v.a,{children:[Object($.jsxs)(k.a,{component:i.b,to:"/",button:!0,children:[Object($.jsx)(y.a,{children:Object($.jsx)(qe.a,{})}),Object($.jsx)(w.a,{primary:"Home"})]},"home"),Object($.jsxs)(k.a,{component:i.b,to:"/user/portfolio",button:!0,children:[Object($.jsx)(y.a,{children:Object($.jsx)(E.a,{})}),Object($.jsx)(w.a,{primary:"Portfolio"})]},"port"),Object($.jsxs)(k.a,{component:i.b,to:"/user/deposit",button:!0,children:[Object($.jsx)(y.a,{children:Object($.jsx)(F.a,{})}),Object($.jsx)(w.a,{primary:"Deposit"})]},"dep"),Object($.jsx)(g.a,{}),Object($.jsxs)(k.a,{component:i.b,to:"/user/logout",button:!0,children:[Object($.jsx)(y.a,{children:Object($.jsx)(Ye.a,{})}),Object($.jsx)(w.a,{primary:"Logout"})]},"log")]})]})}),Object($.jsx)(b.a,{sx:{margin:"auto",marginTop:"1em",maxWidth:1200},children:Object($.jsxs)(C.d,{children:[Object($.jsx)(He,{exact:!0,path:"/",component:we}),Object($.jsx)(He,{exact:!0,path:"/deposit",component:Ae}),Object($.jsx)(He,{path:"/user/portfolio",component:De}),Object($.jsx)(C.b,{path:"/stocks/:ticker",component:Ie}),Object($.jsx)(C.b,{exact:!0,path:"/user/register",component:Ce}),Object($.jsx)(C.b,{exact:!0,path:"/user/login",component:We}),Object($.jsx)(C.b,{exact:!0,path:"/user/logout",component:Je})]})})]})};s.a.render(Object($.jsx)(i.a,{children:Object($.jsx)(de,{children:Object($.jsx)(xe.a,{anchorOrigin:{vertical:"top",horizontal:"center"},maxSnack:3,children:Object($.jsx)(ne.a,{beta:!0,children:Object($.jsx)(Ve,{})})})})}),document.getElementById("root"))}},[[473,1,2]]]);
//# sourceMappingURL=main.607e58b4.chunk.js.map